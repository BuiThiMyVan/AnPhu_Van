@using idn.AnPhu.Biz.Models
@using idn.AnPhu.Biz.Services
@using Client.Core.Data.Entities.Paging;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    var listHotNews = ViewBag.NewsHot;
    var pageInfo = new PageInfo<News>(0, 6);
    var newsCategory = idn.AnPhu.Biz.Services.ServiceFactory.NewsCategoriesManager.GetByShortName("tin-khuyen-mai");
    pageInfo = idn.AnPhu.Biz.Services.ServiceFactory.NewsManager.SearchUsersSide(newsCategory.NewsCategoryId, 0);
}

@section StyleSheet {
    <style>
        a:hover {
            cursor: pointer;
        }

        .product-wrapper {
            padding-top: 55px;
            font-weight: 700;
        }

        .product-cate-list {
            margin-top: 25px;
            display: flex;
            justify-content: center;
        }

        .product-cate-item {
            display: flex;
            color: #337ab7;
            height: 60px;
            font-weight: bold;
        }

        .product-cate-item_active {
            color: #df6a0e;
        }

            .product-cate-item_active:hover {
                color: #df6a0e;
            }

        .product-cate-item span {
            margin-left: 12px;
        }

        .cate-icon {
            width: 38px;
        }

        .product-item {
            padding-top: 25px;
        }

        .product-list .product-img {
            min-height: 190px;
            -webkit-transition: all 1s ease;
        }

            .product-list .product-img:hover {
                transform: scale(1.1);
            }

        .product-list div {
            text-align: center;
        }
    </style>
    <style>
        .header-list {
            padding: 20px 0;
        }

        .header-text {
            border-bottom: none;
            font-size: 25px;
            text-align: center;
        }

        .news-line {
            width: 28px;
            border-bottom: 3px solid var(--main-color);
            margin: auto;
        }

        .news-title {
            color: #034B85;
            font-size: 18px;
            padding: 15px 0;
        }

        .news-summary {
            text-overflow: ellipsis;
            overflow: hidden;
            display: -webkit-box !important;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            white-space: normal;
        }

        .news-title {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .btn-see-more {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            margin-bottom: 40px;
        }

            .btn-see-more a {
                border: 1px solid #034A84;
                color: #034A84;
                padding: 5px 20px;
                font-size: 18px;
                text-transform: uppercase;
                display: inline-block;
                margin: auto;
            }

        .descript-text {
            font-size: 17px;
            text-align: center;
        }

        .news-discount-header {
            font-size: 18px;
        }

        .news-discount-title {
            line-height: 1.5;
            margin-top: -2px;
            color: #333333;
            padding-bottom: 20px;
        }

        .news-discount-summary {
            font-size: 15px;
            padding: 8px 0 16px;
            color: #666666;
            text-align: justify;
        }

        .news-discount-info {
            font-size: 15px;
            color: #666666;
            margin-top: 7px;
            padding-bottom: 25px;
        }
    </style>
}

<div class="wrapper">
    <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active" data-bs-interval="10000">
                <img src="~/Content/images/slide-1.jpg" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item" data-bs-interval="2000">
                <img src="~/Content/images/slide-1.jpg" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="~/Content/images/slide-1.jpg" class="d-block w-100" alt="...">
            </div>
        </div>
    </div>
    <div class="container">
        <div>
            <div class="header-list">
                <div class="header-text">Các dòng xe</div>
                <div class="news-line"></div>
                <div class="product-cate-list">
                    @foreach (PrdCategories item in ViewBag.ListProductCategory)
                    {
                        if (item.PrdCategoryId == ViewBag.PrdCategoryId)
                        {
                            <a class="product-cate-item product-cate-item_active" href="/vi/danh-sach-san-pham/@item.PrdCategoryShortName">
                                <span>@item.PrdCategoryTitle</span>
                            </a>
                        }
                        else
                        {
                            <a class="product-cate-item" href="/vi/danh-sach-san-pham/@item.PrdCategoryShortName">
                                <span>@item.PrdCategoryTitle</span>
                            </a>
                        }

                    }

                </div>
            </div>
        </div>
        <div>
            <div class="header-list">
                <div class="header-text">KHUYẾN MÃI</div>
                <div class="news-line"></div>
                <div class="descript-text">Chúng tôi luôn cập nhật những thông tin mới nhất về chương trình khuyến mãi dành cho ô tô, dịch vụ và bảo hiểm</div>
                <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        @if (pageInfo.DataList != null)
                        {
                            var i = 0;
                            foreach (News newsDiscount in pageInfo.DataList)
                            {
                                if (i == 0)
                                {
                                    <div class="carousel-item news-discount active" data-bs-interval="10000">
                                        <div class="row">
                                            <div class="col-md-5">
                                                <img src="@newsDiscount.NewsImage" alt="Alternate Text" />
                                            </div>
                                            <div class="col-md-7 news-discount-header">
                                                <div><span>Tên chương trình: </span><span class="news-discount-title">@newsDiscount.NewsTitle</span></div>
                                                <div class="news-discount-info">@newsDiscount.NewsCategoryTitle, @newsDiscount.CreateDateFormat</div>
                                                <div class="news-discount-summary">@newsDiscount.NewsSummary</div>
                                            </div>
                                        </div>

                                    </div>
                                }
                                else
                                {
                                    <div class="carousel-item news-discount" data-bs-interval="10000">
                                        <div class="row">
                                            <div class="col-md-5">
                                                <img src="@newsDiscount.NewsImage" alt="Alternate Text" />
                                            </div>
                                            <div class="col-md-7 news-discount-header">
                                                <div><span>Tên chương trình: </span><span class="news-discount-title">@newsDiscount.NewsTitle</span></div>
                                                <div class="news-discount-info">@newsDiscount.NewsCategoryTitle, @newsDiscount.CreateDateFormat</div>
                                                <div class="news-discount-summary">@newsDiscount.NewsSummary</div>
                                            </div>
                                        </div>

                                    </div>
                                }


                                i++;
                            }
                        }

                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
        <div>
            <div class="header-list">
                <div class="header-text">DỊCH VỤ</div>
                <div class="news-line"></div>
            </div>
        </div>
        <div>
            <div class="header-list">
                <div class="header-text">Tin tức</div>
                <div class="news-line"></div>
            </div>
            <div class="row">
                @if (listHotNews != null)
                {
                    foreach (News hotnews in listHotNews)
                    {
                        <a class="hot-news-item col-md-3 col-xs-6" href="/vi/tin-tuc-chi-tiet/@hotnews.NewsId">
                            <div>
                                <img src="@hotnews.NewsImage" alt="Alternate Text" height="196" />
                                <div class="news-title">@hotnews.NewsTitle</div>
                                <div class="news-summary">@hotnews.NewsSummary</div>
                            </div>

                        </a>
                    }
                }
            </div>

        </div>

        <div class="btn-see-more">
            <a href="/vi/tin-tuc/tin-tuc-chung/0">Xem tất cả</a>
        </div>
    </div>
</div>

